<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper	namespace="mybatis.terminal-mapper">
	<!-- 지역선택시 리스트 자동 출력 -->
	<select id="autoListTerminal" parameterType="java.util.Map" resultType="terminalVO">
	<![CDATA[
		select * from(select rownum rn, tt.* from (select * from terminal order by name asc) tt)
   		 where region=#{region} and (rn>=#{startNum} and rn<=#{endNum})
	]]>	
	</select>
	<!--검색창에 단어 입력시 검색 (지역선택을 강제한 상태에서 명칭 및 부기명-숫자로는 검색x-으로 검색-->
	<select id="searchTerminal" parameterType="java.util.Map" resultType="terminalVO">
	<![CDATA[
		select * from(select rownum rn, tt.* from (select * from terminal order by name asc) tt)
		 where (region = #{region} and (name like '%${word}%' or subtext like '%#{word}%')) and (rn>=#{startNum} and rn<=#{endNum})
	]]>
	</select>
	<!-- 목록 수 호출 -->
	<select id="countTerminal" resultType="int">
	<![CDATA[
		select count(*)from terminal
	]]>
	</select>
</mapper>